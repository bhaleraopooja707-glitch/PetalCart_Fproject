<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Checkout | PetalCart ðŸŒ¸</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/cart.css">
</head>
<body>

  <nav class="navbar">
    <h1>PetalCart ðŸŒ¸</h1>
    <div>
      <a href="index.html">Home</a>
      <a href="flowers.html">Flowers</a>
      <a href="cart.html">Cart</a>
    </div>
  </nav>

  <section class="cart-container">

    <!-- Billing Details -->
    <div class="billing-details">
      <h2>Billing Details</h2>
      <input type="text" id="name" placeholder="Full Name">
      <input type="email" id="email" placeholder="Email Address">
      <input type="tel" id="phone" placeholder="Phone Number">
      <textarea id="address" placeholder="Delivery Address"></textarea>
      <button id="place-order">Place Order</button>
    </div>

    <!-- Order Summary -->
    <div class="price-box">
      <h2>Order Summary</h2>
      <div id="checkout-items"></div>
      <h3>Total: â‚¹<span id="checkout-total">0</span></h3>
    </div>

  </section>

  <script>
    // Fetch cart from localStorage
    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    const checkoutItems = document.getElementById("checkout-items");
    const checkoutTotal = document.getElementById("checkout-total");

    function displayCheckout() {
      checkoutItems.innerHTML = "";
      if(cart.length === 0){
        checkoutItems.innerHTML = "<p>Your cart is empty!</p>";
        checkoutTotal.textContent = "0";
        return;
      }

      let total = 0;

      cart.forEach(item => {
        total += item.price * item.quantity;

        const div = document.createElement("div");
        div.classList.add("cart-card");
        div.innerHTML = `
          <img src="${item.img}" alt="${item.name}">
          <div class="item-details">
            <h4>${item.name}</h4>
            <p>Price: â‚¹${item.price}</p>
            <p>Quantity: ${item.quantity}</p>
          </div>
        `;
        checkoutItems.appendChild(div);
      });

      checkoutTotal.textContent = total;
    }

    displayCheckout();

    // Place order
    document.getElementById("place-order").addEventListener("click", () => {
      if(cart.length === 0){
        alert("Your cart is empty!");
        return;
      }

      const name = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const address = document.getElementById("address").value.trim();

      if(!name || !email || !phone || !address){
        alert("Please fill all billing details.");
        return;
      }

      alert(`Thank you, ${name}! Your order of â‚¹${checkoutTotal.textContent} has been placed ðŸŒ¸`);
      localStorage.removeItem("cart"); // clear cart
      window.location.href = "index.html"; // redirect to home
    });
  </script>

</body>

</html>
